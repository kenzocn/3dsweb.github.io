(window.webpackJsonp=window.webpackJsonp||[]).push([["login~f71cff67"],{"130b":function(t,e,i){"use strict";i.r(e);i("1bc7"),i("0c84"),i("3e38");var a=i("9453"),o=i("6be8"),n=new Map([["yhxy",{code:"yhxy",title:"用户协议"}],["yszc",{code:"yszc",title:"隐私权政策"}]]),r={name:"articles_info",props:{type:{type:String,default:"yhxy"}},data:function(){return{data:{}}},computed:{active:function(){return n.get(this.type)}},created:function(){this.getDetail()},methods:{getDetail:function(){var t=this;this.$loading.open("正在加载数据，请稍候......");var e={org_id:this.$store.state.main.hospital.id,group_name:"服务条款",title:this.active.title};a.a.getDetailByTitle(e).then((function(e){e.create_date=o.a.date(e.create_date),t.data=e,"公众号"===t.data.keys&&(location.href=t.data.content),t.$loading.close()})).catch((function(){t.$loading.close()}))}}},s=(i("9731"),i("cba8")),c=Object(s.a)(r,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"articles-info"},[i("h1",{staticClass:"articles-info_title"},[t._v(t._s(t.data&&t.data.title||"--"))]),i("p",{staticClass:"articles-info_date"},[i("span",[t._v(t._s(t.data.author||this.$store.state.main.hospital.name))]),t._v(t._s(t.data&&t.data.create_date||"--")+"\n    ")]),t.data?[i("article",{domProps:{innerHTML:t._s(t.data.content)}})]:t._e()],2)}),[],!1,null,"522f8ab4",null);e.default=c.exports},"46ea":function(t,e,i){"use strict";i("82c5")},"61f7":function(t,e,i){"use strict";i("e680"),i("d0f2"),i("3269");var a={idCard:function(t){return/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$|^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/.test(t)},phone:function(t){return/^1\d{10}$/.test(t)},birthday:function(t){return/((19|20)\d{2})(0[1-9]|1[0-2])([0-2][1-9]|10|20|30|31)/.test(t)},idCardGB:function(t){var e,i,a,o,n,r,s=["1","0","X","9","8","7","6","5","4","3","2"],c=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2];if(t=t.toUpperCase(),!/(^\d{15}$)|(^\d{17}([0-9]|X)$)/.test(t))return!1;if(15===(n=t.length)){if(r=new RegExp(/^(\d{6})(\d{2})(\d{2})(\d{2})(\d{3})$/),o=t.match(r),(a=new Date("19"+o[2]+"/"+o[3]+"/"+o[4])).getYear()===Number(o[2])&&a.getMonth()+1===Number(o[3])&&a.getDate()===Number(o[4])){for(e=0,t=t.substr(0,6)+"19"+t.substr(6,t.length-6),i=0;i<17;i++)e+=t.substr(i,1)*c[i];return t+=s[e%11],!0}return!1}if(18===n){if(r=new RegExp(/^(\d{6})(\d{4})(\d{2})(\d{2})(\d{3})([0-9]|X)$/),o=t.match(r),(a=new Date(o[2]+"/"+o[3]+"/"+o[4])).getFullYear()===Number(o[2])&&a.getMonth()+1===Number(o[3])&&a.getDate()===Number(o[4])){if(a.getFullYear()<1900)return!1;for(e=0,i=0;i<17;i++)e+=t.substr(i,1)*c[i];return s[e%11]===t.substr(17,1)}return!1}return!1}};e.a=a},"82c5":function(t,e,i){},8548:function(t,e,i){},9453:function(t,e,i){"use strict";var a=i("b775"),o=i("99b1"),n=function(t){return o.a.v2+t},r={getList:function(t){return Object(a.a)({url:n(o.a.dicArticle_list),method:"get",params:t})},getDetail:function(t){return Object(a.a)({url:n(o.a.dicArticle),method:"get",params:t})},getGroup:function(t){return Object(a.a)({url:n(o.a.dicArticle_group_list),method:"get",params:{org_id:t}})},getDetailByTitle:function(t){return Object(a.a)({url:n(o.a.dicArticle_detail),method:"get",params:t})}};e.a=r},9731:function(t,e,i){"use strict";i("8548")},ce27:function(t,e,i){"use strict";var a=i("b775"),o=i("99b1"),n={medicareAuth:function(t){return Object(a.a)({url:o.a.v2+o.a.medicare_auth,hideMsg:!0,method:"post",data:t})},medicareRegister:function(t){return Object(a.a)({url:o.a.v2+o.a.medicare_register,method:"post",data:t})},medicareLogin:function(t){return Object(a.a)({url:o.a.v2+o.a.medicare_login,hideMsg:!0,method:"post",data:t})},getUrl:function(){return Object(a.a)({url:o.a.v2+o.a.medicare_auth_url,method:"get"})},applyCard:function(t){return Object(a.a)({url:o.a.v2+o.a.medicare_apply_card,method:"post",data:t})}};e.a=n},dd7b:function(t,e,i){"use strict";i.r(e);i("a450"),i("8dee");var a=i("ed08"),o=i("60fe"),n=i("61f7"),r=i("7ded"),s=i("ce27"),c=i("4e5e"),l=i("3905"),d=i("2277"),u={components:{Popup:l.a},data:function(){return{content:"正在登录...",version:o.a.version,autologin:!1,loading:!1,code_disabled:!1,code_text:"获取验证码",code_time:60,form:{mobile:"",code:"",accept:!1},err:{mobile:"",code:""},show:{pop:!1},user:null}},computed:{userInfo:function(){return this.$store.state.user.userInfo},openid:{set:function(t){this.$store.commit("setOpenid",t)},get:function(){return this.$store.state.user.openid}}},created:function(){this.time=0,this.config=this.$store.state.app.config,this.loginBack=this.$store.getters.getTemp("loginBack")||"home",this.getOpenid(),"0"===a.b.getUrlParam("retCode")&&a.b.getUrlParam("authCode")&&this.$config.login_ybdzpz&&this.medicareAuth()},beforeDestroy:function(){clearInterval(this.timer)},methods:{getOpenid:function(){if(!this.openid){var t=a.b.getUrlParam("openid");t?this.openid=t:d.a.getOpenid()}},validatePhone:function(){return this.err.mobile="",this.form.mobile?n.a.phone(this.form.mobile)||(this.err.mobile="手机号格式错误，请检查"):this.err.mobile="请输入手机号",!this.err.mobile},validateCode:function(){return this.err.code="",this.form.code||(this.err.code="请输入验证码"),!this.err.code},validateAgree:function(){var t=!0;return this.form.accept||(this.$message({text:"请您先阅读协议和政策"}),t=!1),t},changeAgree:function(){this.form.accept=!this.form.accept},getCode:function(){var t=this;this.validatePhone()&&(this.code_disabled=!0,r.b.sendCode({mobile:this.form.mobile}).then((function(){t.startTimer()})).catch((function(e){t.code_disabled=!1,console.error(e)})))},startTimer:function(){var t=this;clearInterval(this.timer),this.code_time=60,this.timer=window.setInterval((function(){--t.code_time<=0&&(t.code_disabled=!1,clearInterval(t.timer),t.code_time=60)}),1e3)},validate:function(){return this.validatePhone()&&this.validateCode()&&this.validateAgree()},submit:function(){var t=this;this.validate()&&(this.loading=!0,this.$store.dispatch("Login",{mobile:this.form.mobile,code:this.form.code,openid:this.openid||"dev"}).finally((function(){t.loading=!1})).then((function(){t.userInfo&&t.userInfo.my?t.$router.replace({name:t.loginBack}):(t.$store.commit("setTemp",{back:t.loginBack}),t.$config.appointment_shch?t.$router.replace({name:"verify_authorize"}):t.$router.replace({name:"verify_add"}))})))},showArticle:function(t){this.$router.push({name:"login_article",params:{type:t}})},login2:function(){},authorize:function(){var t=this;this.$loading.open("跳转中"),s.a.getUrl().finally((function(){t.$loading.close()})).then((function(t){location.href=t+"&redirectUrl="+encodeURIComponent(window.location.href)}))},medicareAuth:function(){var t=this,e={auth_code:a.b.getUrlParam("authCode"),openid:this.openid},i=document.location.href;i=a.b.removeUrlParam(i,"retCode"),i=a.b.removeUrlParam(i,"authCode"),a.b.replaceUrl(i,!1),this.$loading.open("授权中"),s.a.medicareRegister(e).finally((function(){t.$loading.close()})).then((function(e){t.user={idcard:e.idcard,name:e.name,sex:e.sex};var i={openid:t.openid,name:e.name,idcard:e.idcard};t.$loading.open("登录中"),s.a.medicareLogin(i).finally((function(){t.$loading.close()})).then((function(e){e.login=!0,t.$store.commit("setUserInfo",e),t.$router.replace({name:t.loginBack})})).catch((function(e){"未匹配到用户信息"===e?t.show.pop=!0:Object(c.a)({text:e})}))}))},register:function(){this.$router.replace({name:"verify_authorize",query:this.user})}}},f=(i("46ea"),i("cba8")),m=Object(f.a)(u,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"login"},[t.autologin?i("div",{staticClass:"login_loading"},[i("img",{staticClass:"loading_img login_img",attrs:{src:"img/loading.gif"}}),i("span",{staticClass:"login_tip"},[t._v(t._s(t.content))])]):[t._m(0),i("form",{staticClass:"login_form",on:{submit:function(t){t.preventDefault()}}},[i("label",{staticClass:"login_form_row",class:[t.err.mobile?"login_form_row--error":""],attrs:{tabindex:"1"}},[i("p",{staticClass:"login_form_span"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.mobile,expression:"form.mobile"}],staticClass:"login_form_input",attrs:{placeholder:"请输入手机号",autofocus:""},domProps:{value:t.form.mobile},on:{change:t.validatePhone,input:function(e){e.target.composing||t.$set(t.form,"mobile",e.target.value)}}})]),i("p",{staticClass:"login_form_error"},[t._v(t._s(t.err.mobile))])]),i("label",{staticClass:"login_form_row",class:[t.err.code?"login_form_row--error":""],attrs:{tabindex:"2"}},[i("p",{staticClass:"login_form_span"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.code,expression:"form.code"}],staticClass:"login_form_input",attrs:{placeholder:"请输入验证码"},domProps:{value:t.form.code},on:{change:t.validateCode,input:function(e){e.target.composing||t.$set(t.form,"code",e.target.value)}}}),t.code_time&&t.code_disabled?i("button",{staticClass:"login_form_btn",attrs:{disabled:""}},[t._v("重新获取 "+t._s(t.code_time)+"s")]):i("button",{staticClass:"login_form_btn",attrs:{disabled:t.code_disabled},on:{click:t.getCode}},[t._v("获取验证码")])]),i("p",{staticClass:"login_form_error"},[t._v(t._s(t.err.code))])]),i("label",{staticClass:"login_agree",attrs:{tabindex:"3"},on:{click:t.changeAgree}},[i("i",{staticClass:"far login_icon",class:t.form.accept?"fa-check-square":"fa-square"}),i("p",{staticClass:"login_accept"},[t._v("我已同意"),i("span",{staticClass:"login_treaty",on:{click:function(e){return t.showArticle("yhxy")}}},[t._v("《用户协议》")]),t._v("和"),i("span",{staticClass:"login_treaty",on:{click:function(e){return t.showArticle("yszc")}}},[t._v("《隐私权政策》")])])]),i("button",{staticClass:"login_btn nf-btn",attrs:{disabled:t.loading},on:{click:t.submit}},[t._v("登录")]),t.$config.login_ybdzpz?i("label",{staticClass:"login_authorize"},[i("p",{staticClass:"login_authorize_line"},[t._v("使用医保电子凭证")]),i("i",{staticClass:"iconfont icon-yibaodianzipingzhengbeifen",on:{click:t.authorize}})]):t._e()])],i("footer",{staticClass:"login_footer",on:{click:t.login2}},[t._m(1),i("p",{staticClass:"login_info"},[t._v("Ver "+t._s(t.version))])]),i("popup",{staticClass:"login-popup",attrs:{title:"",closable:!1},model:{value:t.show.pop,callback:function(e){t.$set(t.show,"pop",e)},expression:"show.pop"}},[i("div",{staticClass:"login-popup_info"},[t._v("无法匹配账号或账号下就诊人未实名认证，是否重新注册?")]),i("div",{staticClass:"login-popup_footer"},[i("button",{staticClass:"login-popup--cancel",on:{click:function(e){t.show.pop=!1}}},[t._v("取消")]),i("button",{staticClass:"login-popup--confirm",on:{click:t.register}},[t._v("注册")])])])],2)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("header",{staticClass:"login_header"},[e("h1",{staticClass:"login_title"},[this._v("手机验证码登录")]),e("h2",{staticClass:"login_subtitle"},[this._v("未注册手机号将自动注册并登录")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"login_info"},[e("i",{staticClass:"iconfont icon-logoningfan"}),this._v("宁帆科技提供技术支持")])}],!1,null,null,null);e.default=m.exports}}]);