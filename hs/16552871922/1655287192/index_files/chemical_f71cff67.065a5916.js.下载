(window.webpackJsonp=window.webpackJsonp||[]).push([["chemical~f71cff67"],{"0363":function(t,e,i){"use strict";var s=i("b775"),a=i("99b1"),n={getLisList:function(t){return Object(s.a)({url:a.a.lis_list,method:"get",params:t})},getLisDetail:function(t){return Object(s.a)({url:a.a.lis_detail,method:"get",params:t})}};e.a=n},1138:function(t,e,i){},"1c31":function(t,e,i){"use strict";var s=i("b775"),a=i("99b1"),n={getPacsList:function(t){return Object(s.a)({url:a.a.pacs_list,method:"get",params:t})},getPacsDetail:function(t){return Object(s.a)({url:a.a.pacs_detail,method:"get",params:t})},getPacsWebUrl:function(t){return Object(s.a)({url:a.a.pacs_weburl,method:"get",params:t})},getPhyList:function(t){return Object(s.a)({url:a.a.phy_list,method:"get",params:t})},getPhyDetail:function(t){return console.log(t,{physical_no:t}),Object(s.a)({url:a.a.phy_detail,method:"get",params:{physical_no:t}})},getPhySummary:function(t){return Object(s.a)({url:a.a.phy_summary,method:"get",params:{physical_no:t}})},getPhyResult:function(t){return Object(s.a)({url:a.a.phy_result,method:"get",params:{physical_no:t}})},getPhySuggest:function(t){return Object(s.a)({url:a.a.phy_suggestion,method:"get",params:{physical_no:t}})},getNuclein:function(t){return Object(s.a)({url:a.a.nuclein_detail,method:"get",params:{idcard:t}})},v2:{getPacsList:function(t){return Object(s.a)({url:a.a.v2+a.a.pacs_list,method:"get",params:t})},getPacsDetail:function(t){return Object(s.a)({url:a.a.v2+a.a.pacs_detail,method:"get",params:t})},buildPacs:function(t){return Object(s.a)({url:a.a.v2+a.a.pacs_build,method:"get",params:t})},getPacsFile:function(t){return Object(s.a)({url:a.a.v2+a.a.pacs_download,method:"get",responseType:"blob",params:t})},getLisList:function(t){return Object(s.a)({url:a.a.v2+a.a.lis_list,method:"get",params:t})},getLisDetail:function(t){return Object(s.a)({url:a.a.v2+a.a.lis_detail,method:"get",params:t})},buildLis:function(t){return Object(s.a)({url:a.a.v2+a.a.lis_build,method:"get",params:t})},getLisFile:function(t){return Object(s.a)({url:a.a.v2+a.a.lis_download,method:"get",responseType:"blob",params:t})},getImg:function(t){return Object(s.a)({url:"/test/pacs/detail/download",method:"get",responseType:"blob",params:t})},getpdf:function(t){return Object(s.a)({url:"/test/lis/detail/download",method:"get",responseType:"blob",params:t})},getOutSite:function(t){return Object(s.a)({url:a.a.v2+a.a.xk_outsite,method:"get",params:t})}}};e.a=n},"1e50":function(t,e,i){},"3d65":function(t,e,i){"use strict";i.r(e);i("51a4");var s=i("01df"),a=(i("8dee"),i("a450"),i("1bc7"),i("0363")),n=i("1c31"),c=i("53b6"),o=i.n(c),r=i("ed08"),l={name:"chemical_report",data:function(){return{lists:null,infoList:null,detail:{auditor_doc_name:"",diagnosis_result:"",file_seq:[],file_status:null,file_status_error:"",idcard:"",lis_name:"",list:[],name:"",report_time:"",sample_no:"",sample_type:"",send_dept_name:"",send_doc_name:"",send_time:"",serial_no:"",surveyor_doc_name:"",words:""},counts:0}},computed:{config:function(){return this.$store.state.app.config}},created:function(){this.hospital=this.$store.state.main.hospital,this.chemicalInfo=this.$store.getters.getTemp("chemical"),this.getDetail()},methods:{creatBarCode:function(t){t&&o()("#barcode1",t,{format:"CODE128A",lineColor:"#000",background:"#FFFFFF",width:2,height:40,displayValue:!1,fontSize:12})},getDetail:function(){var t=this;return new Promise((function(e){if(!(t.chemicalInfo&&t.chemicalInfo.report_id&&t.chemicalInfo.specimen_no))return t.$message({text:"未获取到报告id"}),void t.$router.back();t.$loading.open("正在获取报告详情");var i={report_id:t.chemicalInfo.report_id,specimen_no:t.chemicalInfo.specimen_no,nfdata:t.chemicalInfo.nfdata,source:t.chemicalInfo.source||"",org_id:t.hospital.id};(t.config.report_v2?n.a.v2.getLisDetail(i):a.a.getLisDetail(i)).finally((function(){t.$loading.close()})).then((function(i){i?(t.lists=[],t.infoList=[],i.type&&t.infoList.push({title:"检查类型",data:i.type}),t.infoList.push({title:"检验项目",data:i.lis_name}),t.config.report_cx?t.infoList.push({title:"报告人",data:i.auditor_doc_name},{title:"送检日期",data:i.send_time},{title:"审核日期",data:i.report_time}):(t.infoList.push({title:"检验人员",data:i.surveyor_doc_name},{title:"审核人员",data:i.auditor_doc_name}),i.apply_doc_name&&t.infoList.push({title:"申请医生",data:i.apply_doc_name}),i.send_time&&t.infoList.push({title:"送检时间",data:i.send_time}),t.infoList.push({title:"报告时间",data:i.report_time})),i.list.forEach((function(e){var i={type:2===e.is_normal?1:3===e.is_normal?-1:"",data:[e.index_name,t.decodeHtml(e.result_value),t.decodeHtml(e.reference_value)]};t.lists.push(i)})),i.files=(i.file_seq||[]).map((function(t){return{name:null,id:t,file:null,url:""}})),i.name=i.name||t.chemicalInfo.name,i.sex_name=i.sex_name||t.chemicalInfo.sex_name,i.idcard=i.idcard||t.chemicalInfo.idcard,i.age=i.age||t.chemicalInfo.age,t.detail=i,t.$nextTick((function(){t.creatBarCode(i.serial_no)}))):(t.$message({text:"未找到报告"}),setTimeout((function(){t.$router.back()}),3e3)),e()})).catch((function(t){console.error(t)}))}))},decodeHtml:function(t){if("string"==typeof t)return t=(t=(t=(t=(t=t.replace(/&nbsp;/g," ")).replace(/&amp;lt;/g,"<")).replace(/&amp;gt;/g,">")).replace(/&lt;/g,"<")).replace(/&gt;/g,">")},askCreate:function(){var t=this;this.$confirm({content:"是否确认生成报告？",btns:[{text:"取消",type:"outline"},{text:"确认",after:function(){t.startCreate()}}]})},startCreate:function(){var t=this,e={report_id:this.chemicalInfo.report_id,serial_no:this.chemicalInfo.specimen_no};this.$loading.open("正在生成报告"),n.a.v2.buildLis(e).finally((function(){t.$loading.close()})).then((function(){t.detail.file_status=0,t.$forceUpdate(),t.dealReport()}))},dealReport:function(){var t=this;this.counts++<5&&(this.$loading.open("正在获取报告详情"),setTimeout((function(){t.getDetail().then((function(){0===t.detail.file_status&&t.dealReport()}))}),3e3))},getReports:function(){var t=this;this.detail.files.forEach((function(e){t.getReport(e)}))},getReport:function(t){var e=this;if(t.file)this.showReport(t);else{var i={report_id:this.chemicalInfo.report_id,serial_no:this.chemicalInfo.specimen_no,seq:t.id};t.loading=!0,this.$forceUpdate(),this.$loading.open("正在获取图文报告"),n.a.v2.getLisFile(i).finally((function(){e.$loading.close(),t.loading=!1})).then((function(i){if("jpg"===e.detail.file_type){t.url=window.URL.createObjectURL(new Blob([i.data])),t.file=i;var s=i.headers["content-disposition"],a=s.indexOf("name=");s=decodeURIComponent(s.substr(a+5)),t.name=s;var n=new FileReader;n.addEventListener("load",(function(){t.url=n.result,t.url=t.url.replace("application/octet-stream","image/jpg"),e.showJPG(t)}),!1),n.readAsDataURL(new Blob([i.data]))}else{if("application/json"===i.data.type)return;t.url=window.URL.createObjectURL(new Blob([i.data])),t.file=i.data;var c=i.headers["content-disposition"],o=c.indexOf("name=");c=decodeURIComponent(c.substr(o+5)),t.name=c,e.showReport(t)}})).catch((function(t){console.error(t)}))}},showReport:function(t){t.url&&(this.$store.commit("setPdf",t.file),this.$router.push({name:"pdf"}))},showJPG:function(t){if(t.url){var e=0,i=this.detail.files.filter((function(t){return t.url})).map((function(i,s){return i.id===t.id&&(e=s),i.url}));Object(s.a)({images:i,startPosition:e,closeable:!0,transition:"none",minZoom:1})}},reAppointment:function(){this.$router.push({name:"reserve_ai",query:{doc_code:this.detail.apply_doc_code}})},getOutSite:function(){var t={family_id:this.detail.family_id||this.operator.family_id,mzh:this.detail.mzh,type:this.detail.type};n.a.v2.getOutSite(t).then((function(t){location.href=t}))},change:function(t){this.setValue(Object(r.d)(t.id)),this.getList()},goApply:function(){this.$router.push({name:"covid19_apply_new",query:{serial_no:this.detail.serial_no}})}}},h=(i("918c"),i("cba8")),u=Object(h.a)(l,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"report-ins"},[i("div",{staticClass:"report-ins_heards"},[i("i",{staticClass:"iconfont icon-tint"}),i("h3",{staticClass:"report-ins_info"},[t._v(t._s(t._f("empty")(t.detail.name))+" "+t._s(t.detail.sex_name)+" "+t._s(t.detail.age?t.detail.age+"岁":"")+"\n    ")]),t.detail.idcard?i("h3",{staticClass:"report-ins_idcard"},[t._v(t._s(t._f("idcard")(t.detail.idcard)))]):t._e(),i("span",{staticClass:"report-ins_report"},[t._v("报告单号："+t._s(t._f("empty")(t.detail.report_id)))])]),t.infoList?i("div",{staticClass:"report-ins_lists"},[t._m(0),i("ul",{staticClass:"report-ins_content"},t._l(t.infoList,(function(e){return i("li",{key:e.title,staticClass:"report-ins_content_text"},[i("span",{staticClass:"report-ins_content_title"},[t._v(t._s(e.title)+":")]),t._v(t._s(t._f("empty")(e.data))+"\n      ")])})),0),i("span",{directives:[{name:"show",rawName:"v-show",value:t.detail.apply_doc_code&&!t.config.outsite,expression:"detail.apply_doc_code&&!config.outsite"}],staticClass:"report-ins_doctor",on:{click:t.reAppointment}},[i("i",{staticClass:"iconfont icon-calendar"}),t._v("复查预约")]),t.config.outsite&&["门诊","体检"].includes(t.detail.type)?i("section",{staticClass:"report-ins_card",on:{click:t.getOutSite}},[t._m(1)]):t._e()]):[t._m(2),t._m(3)],t.lists&&t.lists.length?i("div",{staticClass:"report-ins_lists"},[t._m(4),i("div",{staticClass:"report-ins_table"},[i("table",{staticClass:"report-ins_tables"},[t._m(5),t._l(this.lists,(function(e,s){return i("tr",{key:s,staticClass:"report-ins_tr"},[i("td",{staticClass:"report-ins_table_text",class:{"report-ins_abnormal":[1,-1].includes(e.type)}},[t._v("\n            "+t._s(e.data[0])+"\n          ")]),i("td",{staticClass:"report-ins_table_text",class:{"report-ins_abnormal":[1,-1].includes(e.type)}},[t._v("\n            "+t._s(e.data[1])+"\n            "),i("i",{staticClass:"iconfont",class:1===e.type?"icon-tubiao-jiantoushang1":-1===e.type?"icon-tubiao-jiantouxia1":""})]),i("td",{staticClass:"report-ins_table_text",class:{"report-ins_abnormal":[1,-1].includes(e.type)}},[t._v("\n            "+t._s(e.data[2])+"\n          ")])])}))],2)])]):[t._m(6),t._m(7)],t.detail.serial_no?i("div",{staticClass:"report-ins_lists"},[t._m(8),i("div",{staticClass:"report-ins_content report-ins_barcode"},[i("p",{staticClass:"report-ins_content_text"},[i("span",{staticClass:"report-ins_content_title"},[t._v("条码号:")]),t._v(t._s(t._f("empty")(t.detail.serial_no))+"\n      ")]),i("img",{staticClass:"report-ins_bar",attrs:{id:"barcode1",alt:"",src:""}}),i("span",{staticClass:"report-ins_code_text"},[t._v("可在自助报告机处取纸质报告")])])]):[t._m(9),t._m(10)],t.config.report_v2&&t.config.report_pacs_img&&t.detail&&t.infoList?i("section",{staticClass:"report-ins_section"},[t._m(11),1===t.detail.file_status?[t.detail&&t.detail.files&&t.detail.files.length?i("ul",{staticClass:"report-ins_files"},t._l(t.detail.files,(function(e){return i("li",{key:e.id,staticClass:"report-ins_file",on:{click:function(i){return t.getReport(e)}}},[i("span",{staticClass:"report-ins_filename"},[i("i",{staticClass:"iconfont icon-monitor-heart-rate"}),t._v("报告"+t._s(e.id))]),t._m(12,!0)])})),0):i("div",{staticClass:"report-ins_content2"},[i("i",{staticClass:"iconfont icon-chaxun"}),t._v("暂无数据")])]:99===t.detail.file_status?i("p",{staticClass:"report-ins_fail"},[t._v("生成失败，"+t._s(t.detail.file_status_error))]):t._e(),-1===t.detail.file_status||99===t.detail.file_status&&!t.config.report_prohibit?i("footer",{staticClass:"nf-btns report-ins_buttons"},[i("button",{staticClass:"report-ins_button",on:{click:t.askCreate}},[t._v("点击生成报告")])]):0===t.detail.file_status?i("footer",{staticClass:"nf-btns report-ins_buttons"},[i("button",{staticClass:"report-ins_disButton"},[t._v("正在生成，请稍后刷新页面查看...")])]):t._e()],2):t._e(),t.config.report_apply&&t.detail&&t.detail.lis_name.indexOf("新型冠状")>=0?i("section",{staticClass:"report-ins_footer nf-btns"},[i("button",{staticClass:"nf-btn",on:{click:t.goApply}},[t._v("核酸英文报告申请")])]):t._e()],2)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{staticClass:"report-ins_titleInfo"},[e("i",{staticClass:"iconfont icon-caret-square-right"}),this._v("基本信息")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"report-ins_card_report"},[e("section",{staticClass:"report-ins_card_icon"},[e("i",{staticClass:"iconfont icon-file-search"})]),this._v("\n        报告解读\n      ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{staticClass:"report-ins_titleInfo"},[e("i",{staticClass:"iconfont icon-caret-square-right"}),this._v("基本信息")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"report-ins_content2"},[e("i",{staticClass:"iconfont icon-chaxun"}),this._v("暂无数据")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{staticClass:"report-ins_titleInfo"},[e("i",{staticClass:"iconfont icon-caret-square-right"}),this._v("化验结果")])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",{staticClass:"report-ins_tr"},[e("th",{staticClass:"report-ins_table_head"},[this._v("项目")]),e("th",{staticClass:"report-ins_table_head"},[this._v("结果")]),e("th",{staticClass:"report-ins_table_head"},[this._v("参考")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{staticClass:"report-ins_titleInfo"},[e("i",{staticClass:"iconfont icon-caret-square-right"}),this._v("化验结果")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"report-ins_content2"},[e("i",{staticClass:"iconfont icon-chaxun"}),this._v("暂无数据")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{staticClass:"report-ins_titleInfo"},[e("i",{staticClass:"iconfont icon-caret-square-right"}),this._v("报告条码")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{staticClass:"report-ins_titleInfo"},[e("i",{staticClass:"iconfont icon-caret-square-right"}),this._v("报告条码")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"report-ins_content2"},[e("i",{staticClass:"iconfont icon-chaxun"}),this._v("暂无数据")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{staticClass:"report-ins_titleInfo"},[e("i",{staticClass:"iconfont icon-caret-square-right"}),this._v("图文报告")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"report-ins_btns"},[e("button",{staticClass:"nf-btn1 report-ins_btn"},[this._v("查看")])])}],!1,null,null,null);e.default=u.exports},"424d":function(t,e,i){},"4fab":function(t,e,i){"use strict";i("a450"),i("1bc7");var s=i("ee9c"),a=i("ed08"),n=i("52e3"),c={name:"ReportSearch",components:{DropDown:s.a,TimeSelect:n.a},props:{time:{type:Array},labelPerson:{type:String,default:"就诊人"},labelTime:{type:String,default:"报告时间"}},data:function(){return{select:[{label:this.labelPerson,active:"",list:[]},{label:this.labelTime,active:"",list:[]}],show:!1}},computed:{searchTime:{set:function(t){this.$emit("update:time",t),this.$emit("search")},get:function(){return this.time}}},created:function(){this.init()},activated:function(){this.select[0].active!==this.operator.family_id&&(this.select[0].active=this.operator.family_id,this.$emit("search"))},methods:{init:function(){var t=this,e=null,i=this.$store.state.user.userInfo;console.log(this.operator),i&&i.family&&(this.select[0].active=this.operator.family_id,i.family.forEach((function(i){(e=a.b.clone(i)).id=i.family_id,e.label=i.name,t.select[0].list.push(e)})),this.select[0].list.push({id:"add",label:"去添加"}));var s=new Date,n={year:s.getFullYear(),month:s.getMonth(),day:s.getDate()};this.select[1].active=1,this.select[1].list=[{id:1,label:"近1月",time:[new Date(n.year,n.month-1,n.day),s]},{id:3,label:"近3月",time:[new Date(n.year,n.month-3,n.day),s]},{id:12,label:"近1年",time:[new Date(n.year-1,n.month,n.day),s]}],this.$config.report_lhl&&(this.select[1].active=14,this.select[1].list.unshift({id:14,label:"近7天",time:[new Date(n.year,n.month,n.day-7),s]})),this.$config.report_searchTime&&this.select[1].list.push({id:13,label:"自定义",time:[new Date(n.year-1,n.month,n.day),s]}),this.searchTime=this.select[1].list[0].time},change:function(t){0===t.index?(this.select[t.index].active=t.id,"add"===t.id?(this.select[0].active=this.operator.family_id,this.$router.push({name:"verify_home"})):this.selectFamily(t.item)):(this.select[t.index].active!==t.id&&(this.searchTime=t.item.time),13===t.id&&(this.show=!0),this.select[t.index].active=t.id)},selectFamily:function(t){this.$store.commit("setOperator",t),this.$emit("search")},selectTime:function(){13===this.select[1].active&&(this.show=!0)}}},o=(i("fe54"),i("cba8")),r=Object(o.a)(c,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("header",{staticClass:"report-search"},[i("drop-down",{staticClass:"report-search_drop",attrs:{list:t.select},on:{select:t.change}}),t.searchTime?i("div",{staticClass:"report-search_time",on:{click:t.selectTime}},[i("i",{staticClass:"iconfont icon-calendar-alt"}),i("span",[t._v(t._s(t._f("date")(t.searchTime[0],"yyyy-MM-dd"))+" ~ "+t._s(t._f("date")(t.searchTime[1],"yyyy-MM-dd")))]),13===t.select[1].active?i("i",{staticClass:"iconfont icon-change report-search_change"}):t._e()]):t._e(),i("time-select",{attrs:{type:1,show:t.show,format:"{y}-{m}-{d}",span:12},on:{"update:show":function(e){t.show=e}},model:{value:t.searchTime,callback:function(e){t.searchTime=e},expression:"searchTime"}})],1)}),[],!1,null,null,null);e.a=r.exports},"52e3":function(t,e,i){"use strict";i("e680");var s=i("ed08"),a={props:{show:{type:Boolean,default:!1},type:{type:Number,default:1},value:{type:[Array,Date,String],default:function(){}},format:{type:String,default:"{y}-{m}-{d}"},min:{},max:{},span:{type:Number,default:12}},data:function(){return{time:null,minDate2:void 0,maxDate2:new Date,check:0}},computed:{minDate:function(){return this.min},maxDate:function(){return this.max},activeTime:{set:function(t){if(0===this.type)this.time!==t&&(this.time=Object(s.a)(t));else{if(this.time[0]===t)return;this.time[0]=Object(s.a)(t);var e=new Date(this.time[0].getFullYear(),this.time[0].getMonth()+this.span||12,this.time[0].getDate());this.time[1]&&(this.time[1]>e?this.time[1]=e:this.time[1]<this.time[0]&&(this.time[1]=Object(s.a)(this.time[0]))),this.setString(),this.$forceUpdate()}},get:function(){return 0===this.type?this.time:Object(s.a)(this.time[0])}},activeTime2:{set:function(t){this.time[1]!==t&&(this.time[1]=Object(s.a)(t),this.span&&this.time[1]&&(this.time[1].getTime()-this.time[0].getTime())/864e5>30*this.span&&(this.time[0]=new Date(this.time[1].getFullYear(),this.time[1].getMonth()-this.span||12,this.time[1].getDate())),this.time[1]<this.time[0]&&(this.time[0]=Object(s.a)(this.time[1])),this.setString(),this.$forceUpdate())},get:function(){return Object(s.a)(this.time[1])}}},watch:{value:function(){this.init()},show:function(){this.init()}},created:function(){},methods:{setString:function(){this.time=Object(s.a)(this.time)},init:function(){if(this.show){if(this.value){if(s.b.equal(this.time,this.value))return;this.time=Object(s.a)(this.value)}else 0===this.type?this.time=new Date:this.time=Object(s.d)(1);this.operate(0)}},confirm:function(){var t=[];0===this.type?t=Object(s.h)(this.time,this.format):(t[0]=Object(s.h)(this.time[0],this.format),t[1]=Object(s.h)(this.time[1],this.format)),this.$emit("input",this.time),this.$emit("select",t),this.cancel()},cancel:function(){this.$emit("update:show",!1)},operate:function(t){1===this.type&&(this.check=t)}}},n=(i("69ec"),i("cba8")),c=Object(n.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.show?i("div",[i("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"comp-time"},[i("div",{on:{click:function(t){return t.stopPropagation(),(void 0).apply(null,arguments)}}},[i("header",[i("i",{staticClass:"iconfont icon-times-circle",on:{click:function(e){return e.stopPropagation(),t.cancel.apply(null,arguments)}}}),0===t.type?i("span",[t._v("请选择日期")]):i("span",[t._v("请选择时间范围")]),i("i",{staticClass:"iconfont icon-check-circle",on:{click:function(e){return e.stopPropagation(),t.confirm.apply(null,arguments)}}})]),1===t.type?i("ul",{staticClass:"time-interval"},[i("li",{class:{"time-interval-start":0===t.check},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.operate(0)}}},[i("h2",[t._v("开始时间")]),i("P",[t._v(t._s(t._f("time")(t.time[0],"{y}年{m}月{d}日")))])],1),i("li",{class:{"time-interval-end":1===t.check},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.operate(1)}}},[i("h2",[t._v("结束时间")]),i("P",[t._v(t._s(t._f("time")(t.time[1],"{y}年{m}月{d}日")))])],1)]):t._e(),i("van-datetime-picker",{directives:[{name:"show",rawName:"v-show",value:!t.check,expression:"!check"}],attrs:{type:"date","min-date":t.minDate,"max-date":t.maxDate,"show-toolbar":!1},model:{value:t.activeTime,callback:function(e){t.activeTime=e},expression:"activeTime"}}),i("van-datetime-picker",{directives:[{name:"show",rawName:"v-show",value:t.check,expression:"check"}],attrs:{type:"date","min-date":t.minDate2,"max-date":t.maxDate2,"show-toolbar":!1},model:{value:t.activeTime2,callback:function(e){t.activeTime2=e},expression:"activeTime2"}})],1)])]):t._e()}),[],!1,null,"a9df5a2a",null);e.a=c.exports},"69ec":function(t,e,i){"use strict";i("424d")},"6cda":function(t,e,i){},"73de":function(t,e,i){"use strict";i("1e50")},8743:function(t,e,i){t.exports=i.p+"img/no-info.2b8ec2c7.svg"},"918c":function(t,e,i){"use strict";i("6cda")},b627:function(t,e,i){t.exports=i.p+"img/list_validate.a803ca9c.png"},c218:function(t,e,i){},c56f:function(t,e,i){},db30:function(t,e,i){"use strict";i("c56f")},df60:function(t,e,i){"use strict";i.r(e);i("a450");var s=i("4fab"),a=i("dfed"),n=i("6be8"),c=i("1c31"),o=i("0363"),r={name:"chemical_time",components:{ReportSearch:s.a,item:a.a},data:function(){return{time:null,list:{data:[],status:"loading"}}},created:function(){this.hospital=this.$store.state.main.hospital,this.format="yyyy-MM-dd"},methods:{getList:function(){var t=this;if(this.operator.is_validate){var e={name:this.operator.name,idcard:this.operator.idcard,person_id:this.operator.person_id,family_id:this.operator.family_id,begin_time:n.a.time(this.time[0],this.format),end_time:n.a.time(this.time[1],this.format),org_id:this.hospital.id,visit_type:this.$route.query&&this.$route.query.type};this.list.data=[],this.list.status="loading",(this.$config.report_v2?c.a.v2.getLisList(e):o.a.getLisList(e)).then((function(e){t.list.data=e&&e.list||[],t.list.status="finish"})).catch((function(){t.list.status="error"}))}},select:function(t){console.info("化验记录",t),this.$store.commit("setTemp",{chemical:t}),this.$router.push({name:"chemical_report"})},showFamily:function(){this.$router.push({name:"verify_home"})}}},l=(i("73de"),i("cba8")),h=Object(l.a)(r,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"report-list"},[s("report-search",{attrs:{time:t.time},on:{"update:time":function(e){t.time=e},search:t.getList}}),t.operator.is_validate?s("list",{staticClass:"report-list_list",attrs:{list:t.list.data,status:t.list.status},on:{load:t.getList},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.item,a=e.index;return[s("item",{key:a,staticClass:"home_item",attrs:{item:i},on:{choose:t.select}})]}},{key:"none",fn:function(){return[s("section",{staticClass:"report-list_validate"},[s("img",{staticClass:"report-list_img",attrs:{src:i("8743"),alt:"暂无数据"}}),s("p",{staticClass:"report-list_tip"},[t._v("暂无数据，请稍后再试")])])]},proxy:!0},{key:"loading",fn:function(){return[s("footer",{staticClass:"comp-list_footer"},[s("i",{staticClass:"iconfont icon-loading comp-list_loading"}),t._v("正在调用第三方检查化验报告，请稍候\n      ")])]},proxy:!0}],null,!1,898618361)}):s("section",{staticClass:"report-list_validate"},[s("img",{staticClass:"report-list_img",attrs:{src:i("b627"),alt:"去认证"}}),s("p",{staticClass:"report-list_tip"},[t._v(t._s(t._f("empty")(t.operator.name))+" 尚未实名认证，无权查看")]),s("button",{staticClass:"nf-btn report-list_btn",on:{click:t.showFamily}},[t._v("去认证")])])],1)}),[],!1,null,null,null);e.default=h.exports},dfed:function(t,e,i){"use strict";var s={props:{item:{type:Object}},methods:{choose:function(t){this.$emit("choose",t)}}},a=(i("f444"),i("cba8")),n=Object(a.a)(s,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{staticClass:"chemical-item"},[i("header",{staticClass:"chemical-item_header"},[i("p",{staticClass:"chemical-item_info"},[i("label",{staticClass:"chemical-item_label"},[t._v("报告时间")]),t._v(t._s(t.item.send_date))]),i("p",{staticClass:"chemical-item_info"},[i("label",{staticClass:"chemical-item_label"},[t._v("就诊人")]),t._v(t._s(t.item.patient_name))])]),t._l(t.item.list,(function(e,s){return i("section",{key:s,staticClass:"chemical-item_section",on:{click:function(i){return t.choose(e)}}},[i("h4",{staticClass:"chemical-item_title"},[e.type?i("span",{staticClass:"chemical-item_tag",class:"住院"===e.type?"chemical-item_tag--danger":""},[t._v(t._s(e.type))]):t._e(),t._v("\n      "+t._s(t._f("empty")(e.report_name))+"\n    ")]),i("p",{staticClass:"chemical-item_info"},[i("label",{staticClass:"chemical-item_label"},[t._v("报告单号")]),t._v(t._s(t._f("empty")(e.report_id)))]),i("p",{directives:[{name:"show",rawName:"v-show",value:e.apply_doc_name,expression:"i.apply_doc_name"}],staticClass:"chemical-item_info"},[i("label",{staticClass:"chemical-item_label"},[t._v("申请医生")]),t._v(t._s(t._f("empty")(e.apply_doc_name)))]),i("i",{staticClass:"chemical-item_right iconfont icon-chevron-right"})])}))],2)}),[],!1,null,null,null);e.a=n.exports},ee9c:function(t,e,i){"use strict";i("a7e5"),i("1bc7");var s=i("ed08"),a={props:{list:{type:Array,default:function(){return[]}}},data:function(){return{activeIndex:null,showList:[]}},computed:{selectList:function(){return this.showList[this.activeIndex]}},watch:{list:{deep:!0,handler:function(){this.init()}}},created:function(){this.init()},methods:{init:function(){this.list.forEach((function(t){t.labelShow=t.list[0].label,t.list&&t.list.forEach((function(t,e){void 0===t.id&&(t.id=e),t.children&&t.children.length&&t.children.forEach((function(t,e){void 0===t.id&&(t.id=t.label+e)}))})),t.active||0===t.active?(t.index=t.list.findIndex((function(e){return e.id===t.active})),t.index=-1===t.index?0:t.index):(t.index=0,t.active=t.list[0].id),2===t.type&&(t.list2=t.list[0].children,t.index2=0,t.active2=t.list[0].children[0].id)})),this.showList=Object(s.a)(this.list)},select:function(t){t===this.activeIndex?this.closePop():this.activeIndex=t},change:function(t,e,i){2===this.showList[this.activeIndex].type?2===i?(this.$set(this.showList[this.activeIndex],"active2",t.id),this.$set(this.showList[this.activeIndex],"index2",e),this.showList[this.activeIndex].active2=t.id,this.showList[this.activeIndex].index2=e,this.showList[this.activeIndex].labelShow=t.label,this.$emit("select",{index:this.activeIndex,id:t.id,item:t}),this.closePop()):(this.$set(this.showList[this.activeIndex],"active",t.id),this.$set(this.showList[this.activeIndex],"index",e),this.showList[this.activeIndex].list2=this.showList[this.activeIndex].list[e].children):(this.$set(this.showList[this.activeIndex],"active",t.id),this.$set(this.showList[this.activeIndex],"index",e),this.$emit("select",{index:this.activeIndex,id:t.id,item:t}),this.closePop()),this.$forceUpdate()},closePop:function(){this.activeIndex=null}}},n=(i("db30"),i("cba8")),c=Object(n.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"drop",staticClass:"comp-select",attrs:{tabIndex:"1"},on:{blur:t.closePop}},[i("ul",{staticClass:"comp-select_title"},t._l(t.showList,(function(e,s){return i("li",{key:s,on:{click:function(e){return t.select(s)}}},[i("label",[t._v(t._s(e.label)+"：")]),i("span",[t._v(t._s(2===e.type?e.labelShow:e.list[e.index].label))]),i("i",{class:["iconfont",s===t.activeIndex?"icon-chevron-up":"icon-chevron-down"]})])})),0),t.selectList&&2===t.selectList.type?[null!==t.activeIndex?i("div",{staticClass:"comp-select_outer",on:{click:t.closePop}}):t._e(),null!==t.activeIndex?i("div",{staticClass:"comp-select_popup comp-select_popup--2"},[i("ul",t._l(t.selectList.list,(function(e,s){return i("li",{key:s,class:{active:e.id===t.selectList.active},on:{click:function(i){return t.change(e,s)}}},[t._v("\n          "+t._s(e.label)+"\n          ")])})),0),i("ul",t._l(t.selectList.list2,(function(e,s){return i("li",{key:s,class:{active:e.id===t.selectList.active2},on:{click:function(i){return t.change(e,s,2)}}},[t._v("\n          "+t._s(e.label)+"\n          "),i("i",{staticClass:"iconfont icon-check-light"})])})),0)]):t._e()]:[null!==t.activeIndex?i("div",{staticClass:"comp-select_outer",on:{click:t.closePop}}):t._e(),null!==t.activeIndex?i("ul",{staticClass:"comp-select_popup"},t._l(t.selectList.list,(function(e,s){return i("li",{key:s,class:{active:e.id===t.selectList.active},on:{click:function(i){return t.change(e,s)}}},[t._v("\n        "+t._s(e.label)+"\n        "),i("i",{staticClass:"iconfont icon-check-light"})])})),0):t._e()]],2)}),[],!1,null,"2ba28f2e",null);e.a=c.exports},f444:function(t,e,i){"use strict";i("1138")},fe54:function(t,e,i){"use strict";i("c218")}}]);